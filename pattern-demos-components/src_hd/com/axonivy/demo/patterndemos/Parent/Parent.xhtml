<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>
	<ui:composition template="/layouts/frame-10-full-width.xhtml">
		<ui:define name="title">Parent</ui:define>
		<ui:define name="content">

			<h3>Parent component</h3>

			This demo shows a pattern useful if you share objects in a parent object (this page)
			and a reusable component (Child component). Through the use of Java based controllers
			one object is the holder of the shared object and components get a reference to
			this owner. Every change to the object will be done through the holder and therefore
			is available to all other components. Note, that this also works when the whole object
			is replaced by a new instance (which is typically the case in a JPA save operation).  

			<h:form id="form">
				<p:messages />
				<div class="ui-fluid">
					<p:spacer height="1em"/>
					<div class="grid">
						<div class="col-12 md:col-12 lg:col-12">
							Person: <b><h:outputText value="#{data.ctrl.person}" /></b>
						</div>
					</div>
					<p:spacer height="1em"/>

					<div class="grid">
						<div class="col-12 md:col-12 lg:col-12">
							<p:fieldset id="childFS" legend="Child component">
								<ic:com.axonivy.demo.patterndemos.components.Child childCtrl="#{data.ctrl.childCtrl}" />
							</p:fieldset>
						</div>
					</div>
					<div class="grid justify-content-end">
						<div class="col-12 md:col-2 lg:col-2">
							<p:commandLink id="cancel"
								actionListener="#{ivyWorkflowView.cancel()}" process="@this"
								value="Cancel" />
						</div>
						<div class="col-12 md:col-2 lg:col-2">
							<p:commandButton id="save" actionListener="#{data.ctrl.save}"
								value="Save" update="form childFS" icon="pi pi-check" />
						</div>
					</div>
				</div>
			</h:form>

		</ui:define>
	</ui:composition>
</h:body>

</html>
